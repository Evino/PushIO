<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Push IO Manager by pushio</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Push IO Manager</h1>
        <p>iOS Integration Guide</p>

        <p class="view"><a href="https://github.com/pushio/PushIOManager_iOS">View the Project on GitHub <small>pushio/PushIOManager_iOS</small></a></p>


        <ul>
          <li><a href="https://github.com/pushio/PushIOManager_iOS/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/pushio/PushIOManager_iOS/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/pushio/PushIOManager_iOS">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <p><img src="http://push.io/wp-content/uploads/2012/05/pushio_logo.png" alt="Push IO®"></p>

<p>Copyright © 2009 - 2012 Push IO LLC. All Rights Reserved.<br>
Push IO® is a registered trademark in the United States. All other trademarks are the property of their respective owners.</p>

<h4>Software License Information</h4>

<p>The use of any and all Push IO software regardless of release state is governed by the terms of a Software License Agreement and Terms of Use that are not included here but required by reference. </p>

<h4>Privacy Information</h4>

<p>The use of Push IO services is subject to various privacy policies and restrictions on the use of end user information. For complete information please refer to your Master Agreement, our website privacy policies, and/or other related documents.</p>

<h4>Billing</h4>

<p>For information on your account and billing, please contact <a href="mailto:sales@push.io">sales@push.io</a></p>

<h4>Contact Info</h4>

<p>Push IO<br>
1035 Pearl Street, Suite 400<br>
Boulder, CO 80302 USA<br>
303-335-0903<br><a href="mailto:support@push.io">support@push.io</a><br><a href="http://www.push.io">www.push.io</a>   </p>

<h2>Preface</h2>

<p>Push IO is a leading provider of real-time push notification alerts and mobile data delivery.This document provides the necessary information to leverage Push IO for your mobile application. This document corresponds to the latest version of PushIOManager for iOS.</p>

<h2>Definitions</h2>

<h4>UUID</h4>

<p>A unique identifier corresponding to a specific device that is used to register with the Push IO service.</p>

<h4>Category</h4>

<p>A category defines a specific content type that your app has which users might  be interested in. For example, if your app is a sports app, a category may be a specific team. </p>

<h4>Audience</h4>

<p>An audience defines a group of users based on one or more categories or platforms. For example, you might make an audience out of all of the users who have registered to a category for a team in the Western Conference who are using your app on iOS.</p>

<h4>Test Device</h4>

<p>A device specially registered with Push IO to help you troubleshoot, test, and preview push notifications. </p>

<h2>Getting Started with Push IO</h2>

<p>Before you get started with integration of Push IO into your app code, you need to create an account and do a few setup steps via our web management dashboard.</p>

<h4>Sign Up</h4>

<p>To create your account with Push IO, go to our <a href="https://manage.push.io/auth/invitation/new">new user sign up</a> page. All it takes to get started is an email address, and confirmation that you agree to our <a href="http://www.push.io/legal/tos/">terms of service</a>, <a href="http://www.push.io/legal/privacy/">privacy policy</a>, and <a href="http://www.push.io/legal/agreement/">services agreement</a>.</p>

<p><img src="http://pushiocdn.s3.amazonaws.com/docs_assets/signup.png" alt="Sign up"></p>

<p>After you click the "Sign Up" button, an activation email will be sent to you. Click the activation link found in the email and you will be directed to a page to continue the process by setting a password.</p>

<p><img src="http://pushiocdn.s3.amazonaws.com/docs_assets/welcome_email.png" alt="Welcome email"></p>

<h4>Welcome to Push IO</h4>

<p>After setting your password, account creation is complete. You will be directed to our new user welcome page. We built the welcome page has three simple steps. </p>

<p><img src="http://pushiocdn.s3.amazonaws.com/docs_assets/welcome_page.png" alt="Welcome page"></p>

<ol>
<li>Download the Push IO Mobile Dashboard for your mobile device</li>
<li>Send yourself a Test Push</li>
<li>Add your first app </li>
</ol><p>The first two steps are very are very related. Without doing any integration, we want you to be able to send yourself a test push that shows our platform successfully delivering notifications to your device. In order to achieve this first push, we've published a Push IO Mobile Dashboard companion app on the <a href="http://itunes.apple.com/us/app/push-io-mobile-dashboard/id547681215?mt=8">App Store</a>, <a href="https://play.google.com/store/apps/details?id=com.pushio.dashboard">Google Play</a>, and the Windows Phone marketplace. </p>

<p>Once you install the Push IO Mobile Dashboard, sign in with the Push IO account you just created.</p>

<p><img src="http://pushiocdn.s3.amazonaws.com/docs_assets/mobiledashboard_signin.png" alt="Mobile Dashboard sign in"></p>

<p>After you have signed in, you should see a status message in the app that says:</p>

<blockquote>
<p>Ready to receive push notifications</p>
</blockquote>

<p>This is your signal that it's time to have a little fun. You can send yourself a test push saying whatever you'd like. This message will only go to any device(s) you have installed the Mobile Dashboard and signed into your Push IO account.</p>

<p><img src="http://pushiocdn.s3.amazonaws.com/docs_assets/test_push.png" alt="Test Push"></p>

<p>Just like that, you've sent yourself a Test Push via Push IO.</p>

<p><img src="http://pushiocdn.s3.amazonaws.com/docs_assets/first_push.png" alt="Test Push Received"></p>

<blockquote>
<p>The Push IO Mobile Dashboard will also offer a list of your apps and some basic stats in your pocket. In the future, we'll be adding even more features so you can get the most out of Push IO even on the go.</p>
</blockquote>

<h4>Setting Up Your App</h4>

<p>Next up, tell us the name of the first app you'd like to integrate with Push IO. In case you're wondering, you can also add more apps in the future. This step is just to get the first app created in our system.</p>

<p><img src="http://pushiocdn.s3.amazonaws.com/docs_assets/first_app_news.png" alt="Add an App"></p>

<h4>Configure an iOS Platform</h4>

<p>After creating your app, you are navigated to our primary management interface. There are three main taps at the top:</p>

<ul>
<li>Push</li>
<li>Analytics</li>
<li>Set Up</li>
</ul><p>We'll start out in the Set Up section, where "+ Add Platform" is selected in the sidebar on the left. Push IO communicates with iOS, Android, and Windows Phone devices a little bit differently. In order to push to each platform, there are some platform-specific setup steps.</p>

<p><img src="http://pushiocdn.s3.amazonaws.com/docs_assets/add_plat.png" alt="Add a Platform"></p>

<p>For the purpose of this guide, we'll cover setting up an iOS platform. You can follow a similar process for Android and Windows Phone, which is covered in those platforms' integration guides.</p>

<p>To add an iOS platform, go ahead and click the iOS button. You will be shown a simple iOS setup screen, where you need to upload a .pem file, which is required by Apple so we can send push notifications to your app.</p>

<p><img src="http://pushiocdn.s3.amazonaws.com/docs_assets/add_plat_ios.png" alt="Add a Platform iOS"></p>

<h4>The .pem File</h4>

<p>The .pem file may also be referred to as a Production Push SSL certificate. It is created via Apple's iOS Provisioning Portal. This process can be a bit tricky, so we have an article on <a href="https://pushio.zendesk.com/entries/21644287-generating-a-pem-file-for-ios">generating the pem file</a>.</p>

<p>After you've generated the .pem file per that document, click the "Choose File" button to select and upload to Push IO. </p>

<blockquote>
<p>Now would also be a good time to re-generate your Ad-Hoc Provisioning Profile so that your app will be push enabled the next time you do an Ad-Hoc build. To send push notifications to iOS devices via Push IO, you must be running an Ad-Hoc or App Store build. We do not support sending to Development builds at this time.</p>
</blockquote>

<h4>Download the PushIOManager for iOS</h4>

<p>You're now very close to integration Push IO with your iOS project. First, you need to download our iOS PushIOManager and a configuration file called pushio_config.json. Both downloads are available from the Set Up section of the management dashboard, under your iOS platform page.</p>

<p><img src="http://pushiocdn.s3.amazonaws.com/docs_assets/platformdetail.png" alt="Platform download"></p>

<h2>PushIOManager for iOS</h2>

<h4>Overview</h4>

<p>Push IO provides a lightweight PushIOManager library for each supported platform. </p>

<p>The library provides simple methods for registering so Push IO can send push notifications to a device via the platform gateway. The library also provides interfaces for segmenting your users into groups called categories. This allows you to send targeted push notifications only to those users who have expressed an interest in <em>bird watching</em>, and then perhaps only users who are interested in <em>robins</em>.</p>

<p>Push IO is the only push notification provider which provides data that allows you to understand how push notification engagement leads your users to high-value actions like in-app purchases, premium content viewing, and more. The PushIOManager library provides a simple mechanism to capture this push conversion information, which is available to you via the <a href="https://manage.push.io">Push IO Manager</a> dashboard.</p>

<p>All set? Now you’re ready to integrate Push IO into your app!</p>

<h4>App Integration</h4>

<p>In order to add the PushIOManager framework to your iOS application, follow these simple steps:</p>

<ul>
<li>Locate the two files you downloaded from Set Up &gt; [platform] from the Push IO Manager dashboard.</li>
</ul><p><img src="http://pushiocdn.s3.amazonaws.com/docs_assets/files.png" alt="Downloads"></p>

<ul>
<li>Drag the PushIOManager.framework bundle into your project. Be sure to click “Copy items into destination group’s folder”</li>
</ul><p><img src="http://pushiocdn.s3.amazonaws.com/docs_assets/copyitems.png" alt="Copy items dialogue"></p>

<ul>
<li>Drag pushio_config.json file to your project. A great location is in the same place your AppDelegate class is stored.<br>
</li>
</ul><blockquote>
<p>The pushio_config.json must be in your application bundle in order for the PushIOManager read your API key and properly connect to the backend service.</p>
</blockquote>

<ul>
<li>Import the PushIOManager header file in your AppDelegate.h</li>
</ul><div class="highlight"><pre><span class="cp">#import &lt;PushIOManager/PushIOManager.h&gt;</span>
</pre></div>

<ul>
<li>Declare the PushIOManagerDelegate in your app your AppDelegate.h</li>
</ul><div class="highlight"><pre><span class="k">@interface</span> <span class="nc">AppDelegate</span> : <span class="nc">UIResponder</span> <span class="o">&lt;</span><span class="n">UIApplicationDelegate</span><span class="p">,</span> <span class="n">PushIOManagerDelegate</span><span class="o">&gt;</span>
</pre></div>

<ul>
<li>Integrate the PushIOManager into your application lifecycle in AppDelegate.m</li>
</ul><div class="highlight"><pre><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">application:</span><span class="p">(</span><span class="n">UIApplication</span> <span class="o">*</span><span class="p">)</span><span class="nv">application</span> <span class="nf">didFinishLaunchingWithOptions:</span><span class="p">(</span><span class="n">NSDictionary</span> <span class="o">*</span><span class="p">)</span><span class="nv">launchOptions</span>
<span class="p">{</span>
    <span class="c1">// Initial setup</span>
    <span class="p">[[</span><span class="n">PushIOManager</span> <span class="n">sharedInstance</span><span class="p">]</span> <span class="nl">setDelegate:</span><span class="n">self</span><span class="p">];</span>
    <span class="p">[[</span><span class="n">PushIOManager</span> <span class="n">sharedInstance</span><span class="p">]</span> <span class="nl">didFinishLaunchingWithOptions:</span><span class="n">launchOptions</span><span class="p">];</span>

    <span class="c1">// Requests a device token from Apple</span>
    <span class="p">[[</span><span class="n">UIApplication</span> <span class="n">sharedApplication</span><span class="p">]</span> <span class="nl">registerForRemoteNotificationTypes:</span><span class="n">UIRemoteNotificationTypeAlert</span>     <span class="o">|</span> <span class="n">UIRemoteNotificationTypeBadge</span> <span class="o">|</span> <span class="n">UIRemoteNotificationTypeSound</span><span class="p">];</span>
<span class="p">}</span>
</pre></div>

<ul>
<li>Implement the Apple Push Notification Service callbacks</li>
</ul><div class="highlight"><pre><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">application:</span><span class="p">(</span><span class="n">UIApplication</span> <span class="o">*</span><span class="p">)</span><span class="nv">application</span> <span class="nf">didRegisterForRemoteNotificationsWithDeviceToken:</span>    
<span class="p">(</span><span class="n">NSData</span> <span class="o">*</span><span class="p">)</span><span class="nv">deviceToken</span>
<span class="p">{</span>
    <span class="p">[[</span><span class="n">PushIOManager</span> <span class="n">sharedInstance</span><span class="p">]</span> <span class="nl">didRegisterForRemoteNotificationsWithDeviceToken:</span><span class="n">deviceToken</span><span class="p">];</span>
<span class="p">}</span>

<span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">application:</span><span class="p">(</span><span class="n">UIApplication</span> <span class="o">*</span><span class="p">)</span><span class="nv">application</span> <span class="nf">didFailToRegisterForRemoteNotificationsWithError:</span><span class="p">(</span><span class="n">NSError</span> <span class="o">*</span><span class="p">)</span><span class="nv">error</span>
<span class="p">{</span>
    <span class="p">[[</span><span class="n">PushIOManager</span> <span class="n">sharedInstance</span><span class="p">]</span> <span class="nl">didFailToRegisterForRemoteNotificationsWithError:</span><span class="n">error</span><span class="p">];</span>
<span class="p">}</span>

<span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">application:</span><span class="p">(</span><span class="n">UIApplication</span> <span class="o">*</span><span class="p">)</span><span class="nv">application</span> <span class="nf">didReceiveRemoteNotification:</span><span class="p">(</span><span class="n">NSDictionary</span> <span class="o">*</span><span class="p">)</span><span class="nv">userInfo</span>
<span class="p">{</span>
    <span class="p">[[</span><span class="n">PushIOManager</span> <span class="n">sharedInstance</span><span class="p">]</span> <span class="nl">didReceiveRemoteNotification:</span><span class="n">userInfo</span><span class="p">];</span>
<span class="p">}</span>
</pre></div>

<ul>
<li>Implement PushIOManager delegate protocol </li>
</ul><div class="highlight"><pre><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">readyForRegistration</span>
<span class="p">{</span>
   <span class="c1">// If this method is called back, PushIOManager has a proper device token</span>
   <span class="c1">// so now you are ready to register.</span>
<span class="p">}</span>

<span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">registrationSucceeded</span>
<span class="p">{</span>
   <span class="c1">// Push IO registration was successful</span>
<span class="p">}</span>

<span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nl">registrationFailedWithError:</span><span class="p">(</span><span class="n">NSError</span> <span class="o">*</span><span class="p">)</span><span class="n">error</span> <span class="nl">statusCode:</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">statusCode</span>
<span class="p">{</span>
   <span class="c1">// Push IO registration failed</span>
<span class="p">}</span>
</pre></div>

<ul>
<li>Register with Push IO
You can register a device with Push IO in at least two ways. First, if your application gives users a way to specify a preference or favorite, you may want to register for that category so that you can you push to them relevant content.</li>
</ul><p>This kind of registration would be tied to a UI action, such as a UISwitch on/off action.</p>

<p><img src="http://pushiocdn.s3.amazonaws.com/docs_assets/switches.png" alt="UISwitch registration"></p>

<div class="highlight"><pre>
<span class="k">-</span> <span class="p">(</span><span class="kt">IBAction</span><span class="p">)</span><span class="nf">switchAction:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">sender</span>
<span class="p">{</span>
     <span class="n">UISwitch</span> <span class="o">*</span><span class="n">mySwitch</span> <span class="o">=</span> <span class="p">(</span><span class="n">UISwitch</span> <span class="o">*</span><span class="p">)</span><span class="n">sender</span><span class="p">;</span>

     <span class="k">if</span> <span class="p">(</span><span class="n">mySwitch</span><span class="p">.</span><span class="n">on</span> <span class="o">==</span> <span class="n">YES</span><span class="p">)</span>
     <span class="p">{</span>
        <span class="c1">// Register for US Headlines</span>
        <span class="p">[[</span><span class="n">PushIOManager</span> <span class="n">sharedInstance</span><span class="p">]</span> <span class="nl">registerCategory:</span><span class="s">@"US"</span><span class="p">];</span>
     <span class="p">}</span>
     <span class="k">else</span>
     <span class="p">{</span>
        <span class="c1">// Unregister for US Headlines</span>
        <span class="p">[[</span><span class="n">PushIOManager</span> <span class="n">sharedInstance</span><span class="p">]</span> <span class="nl">unregisterCategory:</span><span class="s">@"US"</span><span class="p">];</span>
      <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>There's a great way to check that you're registration code is working. If you login to the Push IO management dashboard and navigate to the Set Up section, click on Categories. If your register call worked, you will see the category listed with a number of devices that belong to that group.</p>

<p><img src="http://pushiocdn.s3.amazonaws.com/docs_assets/categories.png" alt="Categories"></p>

<p>If you just want to be able to broadcast to all your users at once, you can register more generically.</p>

<div class="highlight"><pre><span class="c1">// Register device, so broadcasts can be sent to the user.</span>
<span class="p">[[</span><span class="n">PushIOManager</span> <span class="n">sharedInstance</span><span class="p">]</span> <span class="n">registerWithPushIO</span><span class="p">];</span>

<span class="c1">// Unregister device entirely from Push IO.</span>
<span class="p">[[</span><span class="n">PushIOManager</span> <span class="n">sharedInstance</span><span class="p">]</span> <span class="n">unregisterWithPushIO</span><span class="p">];</span>
</pre></div>

<p>You can ask PushIOManager if a category is registered, to help configure your UI.</p>

<div class="highlight"><pre><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">viewWillAppear</span>
<span class="p">{</span>
    <span class="p">[</span><span class="n">super</span> <span class="n">viewWillAppear</span><span class="p">];</span>

    <span class="c1">// Set UI switches based upon Push IO registration status</span>
    <span class="n">_usSwitch</span><span class="p">.</span><span class="n">on</span> <span class="o">=</span> <span class="p">[[</span><span class="n">PushIOManager</span> <span class="n">sharedInstance</span><span class="p">]</span> <span class="nl">isRegisteredForCategory:</span><span class="s">@"US"</span><span class="p">];</span>
    <span class="n">_sportsSwitch</span><span class="p">.</span><span class="n">on</span> <span class="o">=</span> <span class="p">[[</span><span class="n">PushIOManager</span> <span class="n">sharedInstance</span><span class="p">]</span> <span class="nl">isRegisteredForCategory:</span><span class="s">@"Sports"</span><span class="p">];</span>
<span class="p">}</span>
</pre></div>

<h4>Register a Test Device</h4>

<p>Test devices are a great way to verify integration, preview notifications before they go-live, and use Push IO before you are in production. Sending to test devices does not require that you have a billing plan selected.</p>

<p>To register a test device, you need the Push IO unique identifier generated by the PushIOManager for your device. The library has a help method grab this value:</p>

<div class="highlight"><pre><span class="p">[[</span><span class="n">PushIOManager</span> <span class="n">sharedInstance</span><span class="p">]</span> <span class="n">pushIOUUID</span><span class="p">];</span>
</pre></div>

<p>Once you have this value, navigate to Set Up &gt; Audiences &gt; Test Devices at the Push IO management dashboard, and click "+ Add Device".</p>

<p><img src="http://pushiocdn.s3.amazonaws.com/docs_assets/add_test_device.png" alt="Add Test Device"></p>

<p>Once this is done, you can use the composer to send yourself a test push. </p>

<h4>Send a Test Push</h4>

<p>Congratulations, you've integrated the PushIOManager! Now it's time to test your iOS integration. Login to the Push IO management dashboard, navigate to Push and try sending to Test Devices. You can send to your registered Test Devices AND any device logged into the Push IO Mobile Dashboard. If integration was successful, you will receive two push notifications.</p>

<ol>
<li>To your app</li>
<li>To the Push IO Mobile Dashboard</li>
</ol><p><img src="http://pushiocdn.s3.amazonaws.com/docs_assets/two_test_pushes.png" alt="Two Test Pushes"></p>

<p>If you only receive the Push IO Mobile Dashboard push, it's a clue that something was integrated incorrectly. See the troubleshooting section at the end of this document.</p>

<h4>Engagement Metrics and Push Conversion</h4>

<p>Push IO is the only push notification provider that goes beyond simply telling you if your users are opening your app via a push notification. We provide you a simple integration to track engagement metrics.</p>

<p>With engagement metrics, you can connect the dots between a notification and actual user behavior. Do you want to see if a push notification is trying social activity? What about premium content purchases? By understand your push conversion you can improve your messaging strategy, and even re-target users based upon user behavior.</p>

<p>PushIOManager has some built in engagement metrics that we use to automatically track whether a user launches an app because of your push notification, or was already active in your app when the push was received. You don't have to do anything, but integrate into your app code as covered previously in this document, to start seeing engagements in the Analytics tab of the Push IO management dashboard.</p>

<blockquote>
<p>If you send a push via the composer, you will see engagements and push conversion metrics in real-time!  </p>
</blockquote>

<p><img src="http://pushiocdn.s3.amazonaws.com/docs_assets/engagements.png" alt="Engagements"></p>

<blockquote>
<p>PUSHIO_ENGAGEMENT_METRIC_INAPP_PURCHASE<br>
PUSHIO_ENGAGEMENT_METRIC_PREMIUM_CONTENT 
PUSHIO_ENGAGEMENT_METRIC_SOCIAL<br>
PUSHIO_ENGAGEMENT_METRIC_OTHER            (other generic activity)  </p>
</blockquote>

<p>The code integration should occur when the action occurs. For example, after a successful in-app purchase, you would insert this line of code:</p>

<div class="highlight"><pre><span class="p">[[</span><span class="n">PushIOManager</span> <span class="n">sharedInstance</span><span class="p">]</span> <span class="nl">trackEngagementMetric:</span><span class="n">PUSHIO_ENGAGEMENT_METRIC_INAPP_PURCHASE</span><span class="p">];</span>
</pre></div>

<p>Once this code is integrated, you'll start seeing Push Conversion metrics within the Analytics tab of the Push IO management dashboard.</p>

<p><img src="http://pushiocdn.s3.amazonaws.com/docs_assets/push_conversion.png" alt="Push Conversion"></p>

<p>You can also track arbitrary custom actions, like when a use signs-up for your service:</p>

<div class="highlight"><pre><span class="p">[[</span><span class="n">PushIOManager</span> <span class="n">sharedInstance</span><span class="p">]</span> <span class="nl">trackEngagementCustomMetric:</span><span class="s">@"SignUp"</span><span class="p">];</span>
</pre></div>

<blockquote>
<p>The dashboard doesn't yet let graph custom metrics. This capability is coming soon. We are collecting custom events, so feel free to use this feature in preparation for the data display.</p>
</blockquote>

<h4>Newsstand Integration</h4>

<p>If your app is a Newsstand app, you need a few extra items in your App Delegate. These additions ensure that your app will receive special Newsstand notifications to trigger new content background downloads.</p>

<div class="highlight"><pre><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">application:</span><span class="p">(</span><span class="n">UIApplication</span> <span class="o">*</span><span class="p">)</span><span class="nv">application</span> <span class="nf">didFinishLaunchingWithOptions:</span><span class="p">(</span><span class="n">NSDictionary</span> <span class="o">*</span><span class="p">)</span><span class="nv">launchOptions</span>
<span class="p">{</span>
    <span class="p">[[</span><span class="n">PushIOManager</span> <span class="n">sharedInstance</span><span class="p">]</span> <span class="nl">setDelegate:</span><span class="n">self</span><span class="p">];</span>
    <span class="p">[[</span><span class="n">PushIOManager</span> <span class="n">sharedInstance</span><span class="p">]</span> <span class="nl">didFinishLaunchingWithOptions:</span><span class="n">launchOptions</span><span class="p">];</span>

    <span class="p">[[</span><span class="n">UIApplication</span> <span class="n">sharedApplication</span><span class="p">]</span> <span class="nl">registerForRemoteNotificationTypes:</span><span class="n">UIRemoteNotificationTypeAlert</span><span class="o">|</span><span class="n">UIRemoteNotificationTypeBadge</span><span class="o">|</span><span class="n">UIRemoteNotificationTypeSound</span><span class="o">|&lt;</span><span class="n">b</span><span class="o">&gt;</span><span class="n">UIRemoteNotificationTypeNewsstandContentAvailability</span><span class="o">&lt;/</span><span class="n">b</span><span class="o">&gt;</span><span class="p">];</span>

    <span class="c1">// If set during testing, Apple will not enforce the one-update-per-24-hours push notification for content updates. </span>
    <span class="c1">// IMPORTANT: If you keep this code in your App Store submission build, your app WILL be rejected.</span>

    <span class="p">[[</span><span class="n">NSUserDefaults</span> <span class="n">standardUserDefaults</span><span class="p">]</span> <span class="nl">setBool:</span><span class="n">YES</span> <span class="nl">forKey:</span><span class="s">@"NKDontThrottleNewsstandContentNotifications"</span><span class="p">];</span>

    <span class="k">return</span> <span class="n">YES</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

<p>The PushIOManager also supports an optional protocol method that gets called back when your app received a "content-update" push notification. In this method download your new content, which will happen in the background.</p>

<div class="highlight"><pre><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">newNewsstandContentAvailable</span>
<span class="p">{</span>
    <span class="c1">// Download your content here.</span>
    <span class="n">NSLog</span><span class="p">(</span><span class="s">@"Push IO new newstand content available"</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>

<h2>Troubleshooting</h2>

<h4>Ad-Hoc Builds Only</h4>

<p>Be sure to install an Ad-Hoc build of your app. Push IO only supports Apple's Production APNS environment, which is only available in Ad-Hoc or App Store builds. </p>

<p>If you're testing with a Developer build of your app, you will not receive push notifications on your device.</p>

<h4>Provisioning Profiles</h4>

<p>Be sure to re-generated your Ad-Hoc and App Store provisioning profiles after you enable production push and generate your .pem file. If you don't do this, your Ad-Hoc or App Store build will not be push enabled.</p>

<p>When you launched your Ad-Hoc build for the first time post-integration, you should see a pop-up alert like this:</p>

<p><img src="http://pushiocdn.s3.amazonaws.com/docs_assets/twitter_pushnotification.png" alt="Allow Push Notifications"></p>

<p>If you didn't see this, it's a clue that you need to re-generate your provisioning profile.</p>

<p>You can also open your provisioning profile(s) in TextEdit. If they are properly push enabled, you will see:</p>

<p><img src="http://pushiocdn.s3.amazonaws.com/docs_assets/mobileprovision.png" alt="Mobile Provision"></p>

<p>If the value is "development" and not "production", you will not receive push notifications. Push IO only supports delivery of push notifications via Apple's production push service.</p>

<h3>Oh, that rotten .pem file!</h3>

<p>The process of created a .pem file can be the hardest part of getting push notifications up and running. Double check that you've followed the steps outlined in our article on <a href="https://pushio.zendesk.com/entries/21644287-generating-a-pem-file-for-ios">generating the pem file</a>.</p>

<h4>Debugging PushIOManager</h4>

<p>PushIOManager supports several debug levels which control how verbose the library is when logging to the console. Setting a debug level may help troubleshoot. Available debug levels are:</p>

<blockquote>
<p>PUSHIO_DEBUG_NONE   (default)<br>
PUSHIO_DEBUG_ERRORS_ONLY<br>
PUSHIO_DEBUG_ACTIVITY<br>
PUSHIO_DEBUG_VERBOSE  </p>
</blockquote>

<p>To set a debug level, simply add a line like the following your in App Delegate:</p>

<div class="highlight"><pre>    <span class="p">[[</span><span class="n">PushIOManager</span> <span class="n">sharedInstance</span><span class="p">]</span> <span class="nl">setDebugLevel:</span><span class="n">PUSHIO_DEBUG_ERRORS_ONLY</span><span class="p">];</span>
</pre></div>

<h2>Support</h2>

<p>If you need further assistance, we're happy to help. Please visit our <a href="http://pushio.zendesk.com">support site</a> or email us at <a href="mailto:support@push.io">support@push.io</a>.</p>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/pushio">pushio</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-16817212-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>